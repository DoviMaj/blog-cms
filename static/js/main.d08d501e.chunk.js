(this["webpackJsonpblog-cms"]=this["webpackJsonpblog-cms"]||[]).push([[0],{59:function(e,t,r){},60:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(23),c=r.n(n),s=r(17),o=r(10),i=r(9),u=r(7),l=r.n(u),j=r(8),p=r(22),d=r(14),h=r(6),b=r(1),x=function(e){var t=e.setUserAuth,r=Object(p.a)(),n=r.register,c=r.handleSubmit,s=r.errors,i=Object(a.useState)(!1),u=Object(o.a)(i,2),x=u[0],O=u[1],f=function(){var e=Object(j.a)(l.a.mark((function e(r){var a,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify(r),e.prev=1,e.next=4,fetch("https://dovimaj-blog-api.herokuapp.com/api/login",{method:"POST",body:a,headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:return n=e.sent,e.next=7,n.json();case 7:if(c=e.sent,200===n.status){e.next=11;break}return O(!0),e.abrupt("return");case 11:localStorage.setItem("token",c.token),localStorage.setItem("userAuth",!0),t(!0),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),O(!0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(h.a,{className:"layout",children:[Object(b.jsx)("h3",{children:"Login"}),Object(b.jsxs)(h.a.Group,{children:[Object(b.jsx)(h.a.Label,{htmlFor:"author_name",children:"User:"}),Object(b.jsx)(h.a.Control,{autoComplete:"username",name:"username",type:"text",placeholder:"Name",ref:n({required:"required field"})}),s.username&&Object(b.jsx)(h.a.Text,{children:s.username.message})]}),Object(b.jsxs)(h.a.Group,{children:[Object(b.jsx)(h.a.Label,{htmlFor:"password",placeholder:"password",children:"Password:"}),Object(b.jsx)(h.a.Control,{autoComplete:"current-password",name:"password",type:"password",ref:n({required:"required field"})}),s.password&&Object(b.jsxs)(h.a.Text,{children:[s.password.message," "]})]}),x&&Object(b.jsx)(h.a.Text,{children:"Username or password incorrect"}),Object(b.jsx)(d.a,{type:"submit",onClick:c(f),children:"Login"})]})},O=r(32),f=function(e){var t=e.post,r=Object(i.n)();return Object(b.jsxs)(O.a,{style:{width:"18rem",padding:"30px",borderRadius:"20px",maxHeight:"410px",overflow:"hidden",textOverflow:"ellipsis"},children:[Object(b.jsx)(O.a.Title,{children:t.title}),Object(b.jsx)(d.a,{variant:"link",children:Object(b.jsx)(s.Link,{to:"".concat(r.url,"/").concat(t._id),children:"Edit Post "})}),Object(b.jsxs)(O.a.Body,{children:[t.text," "]})]})},m=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),r=t[0],n=t[1];return Object(a.useEffect)((function(){(function(){var e=Object(j.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://dovimaj-blog-api.herokuapp.com/api/posts");case 3:return(t=e.sent).status,e.next=7,t.json();case 7:r=e.sent,n(r.posts),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(b.jsx)("div",{className:"postList layout",children:Object(b.jsx)("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap"},children:r&&r.map((function(e){return Object(b.jsx)(f,{post:e},e._id)}))})})},v=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(),s=Object(o.a)(c,2),u=s[0],x=s[1],O=Object(a.useState)(!1),f=Object(o.a)(O,2),m=f[0],v=f[1],k=Object(p.a)(),g=k.register,w=k.handleSubmit,y=k.errors,C=Object(i.k)(),S=Object(i.m)().id;Object(a.useEffect)((function(){(function(){var e=Object(j.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://dovimaj-blog-api.herokuapp.com/api/posts/".concat(S));case 3:if(200===(t=e.sent).status){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,t.json();case 8:r=e.sent,n(r.post),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()(),function(){var e=Object(j.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://dovimaj-blog-api.herokuapp.com/api/posts/".concat(S,"/comments"));case 3:if(200===(t=e.sent).status){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,t.json();case 8:r=e.sent,x(r.comments),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}()(),v(!1)}),[]);var T=function(){var e=Object(j.a)(l.a.mark((function e(t){var r,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),a="Bearer ".concat(r),n=JSON.stringify(t),e.prev=3,e.next=6,fetch("https://dovimaj-blog-api.herokuapp.com/api/posts/".concat(S),{method:"PUT",body:n,headers:{Authorization:a,"Content-Type":"application/json"}});case 6:if(200===e.sent.status){e.next=9;break}return e.abrupt("return");case 9:v(!0),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(3);case 14:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),r="Bearer ".concat(t),e.prev=2,e.next=5,fetch("https://dovimaj-blog-api.herokuapp.com/api/posts/".concat(S),{method:"delete",headers:{Authorization:r,"Content-Type":"application/json"}});case 5:if(200===e.sent.status){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,A();case 10:C.push("/posts"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(j.a)(l.a.mark((function e(t){var r,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),a="Bearer ".concat(r),e.prev=2,e.next=5,fetch("https://dovimaj-blog-api.herokuapp.com/api/posts/".concat(S,"/comments/").concat(t),{method:"delete",headers:{Authorization:a,"Content-Type":"application/json"}});case 5:if(200===e.sent.status){e.next=8;break}return e.abrupt("return");case 8:n=u.filter((function(e){return e._id!==t})),x(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),r="Bearer ".concat(t),e.prev=2,e.next=5,fetch("https://dovimaj-blog-api.herokuapp.com/api/posts/".concat(S,"/comments"),{method:"delete",headers:{Authorization:r,"Content-Type":"application/json"}});case 5:if(200===e.sent.status){e.next=8;break}return e.abrupt("return");case 8:x({}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"layout",children:[r?Object(b.jsx)("div",{children:Object(b.jsxs)(h.a,{children:[Object(b.jsxs)(h.a.Group,{children:[Object(b.jsx)(h.a.Label,{htmlFor:"title",children:"Title:"}),Object(b.jsx)(h.a.Control,{ref:g({required:"required field"}),name:"title",defaultValue:r.title}),y.title&&Object(b.jsx)(h.a.Text,{children:"Required field"})]}),Object(b.jsxs)(h.a.Group,{children:[Object(b.jsx)(h.a.Label,{htmlFor:"text",children:"Post:"}),Object(b.jsx)(h.a.Control,{as:"textarea",name:"text",ref:g({required:"required field"}),defaultValue:r.text}),y.text&&Object(b.jsx)(h.a.Text,{children:"Required field"})]}),Object(b.jsxs)(h.a.Group,{children:[Object(b.jsx)(h.a.Label,{htmlFor:"author_name",children:"Author:"}),Object(b.jsx)(h.a.Control,{name:"author_name",ref:g({required:"required field"}),defaultValue:r.author_name}),y.author_name&&Object(b.jsx)(h.a.Text,{children:"Required field"})]}),m&&Object(b.jsx)(h.a.Text,{children:"Updated successfully!"}),Object(b.jsxs)(h.a.Group,{children:[" ",Object(b.jsx)(d.a,{type:"submit",onClick:w(T),children:"Update"}),Object(b.jsx)(d.a,{style:{margin:"20px"},variant:"danger",onClick:q,children:"Delete post"})]})]})}):Object(b.jsx)("p",{children:"Loading..."}),u&&Object(b.jsx)("p",{children:"Comments:"}),u&&u.map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:e.text}),Object(b.jsx)(d.a,{variant:"danger",onClick:function(){return L(e._id)},children:"Delete"})]},e._id)}))]})},k=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),r=t[0],n=t[1],c=Object(p.a)(),s=c.register,u=c.handleSubmit,x=c.errors,O=Object(i.k)(),f=function(){var e=Object(j.a)(l.a.mark((function e(t){var r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),a="Bearer ".concat(r),c=JSON.stringify(t),e.prev=3,e.next=6,fetch("https://dovimaj-blog-api.herokuapp.com/api/posts/",{method:"post",body:c,headers:{Authorization:a,"Content-Type":"application/json"}});case 6:if(200===e.sent.status){e.next=9;break}return e.abrupt("return");case 9:O.push("/posts"),n(!0),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(3);case 15:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{children:Object(b.jsxs)(h.a,{children:[Object(b.jsxs)(h.a.Group,{children:[Object(b.jsx)(h.a.Label,{htmlFor:"title",children:"Title:"}),Object(b.jsx)(h.a.Control,{ref:s({required:"required field"}),name:"title"}),x.title&&Object(b.jsx)(h.a.Text,{children:"Required field"})]}),Object(b.jsxs)(h.a.Group,{children:[Object(b.jsx)(h.a.Label,{htmlFor:"text",children:"Text:"}),Object(b.jsx)(h.a.Control,{as:"textarea",name:"text",ref:s({required:"required field"})}),x.text&&Object(b.jsx)(h.a.Text,{children:"Required field"})]}),Object(b.jsxs)(h.a.Group,{children:[Object(b.jsx)(h.a.Label,{htmlFor:"author_name",children:"Author:"}),Object(b.jsx)(h.a.Control,{name:"author_name",ref:s({required:"required field"})}),x.author_name&&Object(b.jsx)(h.a.Text,{children:"Required field"})]}),Object(b.jsx)(d.a,{type:"submit",onClick:u(f),children:"Update"}),r&&Object(b.jsx)(h.a.Text,{children:"Submited successfully!"})]})})},g=r(40),w=r(31),y=r(39),C=function(e){var t=e.userAuth,r=e.setUserAuth;return Object(b.jsxs)(g.a,{children:[Object(b.jsxs)(g.a.Brand,{children:[" ",Object(b.jsx)("h1",{children:"Blog CMS"})]}),Object(b.jsxs)(w.a,{className:"mr-auto",children:[Object(b.jsx)(y.LinkContainer,{to:"/",children:Object(b.jsx)(w.a.Link,{children:"Home"})}),Object(b.jsx)(y.LinkContainer,{to:"/newpost",children:Object(b.jsx)(w.a.Link,{children:"New Post"})})]}),t&&Object(b.jsx)(d.a,{variant:"outline-success",onClick:function(){r(!1),localStorage.clear()},children:"Logout"})]})},S=r(44),T=r(26),q=r(45);var L=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),r=t[0],n=t[1];return Object(a.useEffect)((function(){var e=localStorage.getItem("userAuth");n(!!e)}),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(S.a,{children:Object(b.jsx)(q.a,{children:Object(b.jsxs)(T.a,{children:[" ",Object(b.jsx)(C,{userAuth:r,setUserAuth:n,className:"Nav"}),Object(b.jsxs)(i.g,{children:[Object(b.jsx)(i.d,{exact:!0,path:"/",children:Object(b.jsx)(i.c,{to:"/posts"})}),Object(b.jsx)(i.d,{exact:!0,path:"/posts",children:r?Object(b.jsx)(m,{}):Object(b.jsx)(x,{setUserAuth:n})}),Object(b.jsx)(i.d,{exact:!0,path:"/posts/:id",children:r?Object(b.jsx)(v,{}):Object(b.jsx)(x,{setUserAuth:n})}),Object(b.jsx)(i.d,{exact:!0,path:"/newpost",children:r?Object(b.jsx)(k,{}):Object(b.jsx)(x,{setUserAuth:n})}),Object(b.jsx)(i.d,{path:"/",children:Object(b.jsx)("p",{children:"404"})})]})]})})})})},A=(r(59),function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,62)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),a(e),n(e),c(e),s(e)}))});c.a.render(Object(b.jsx)(s.BrowserRouter,{children:Object(b.jsx)(L,{})}),document.getElementById("root")),A()}},[[60,1,2]]]);
//# sourceMappingURL=main.d08d501e.chunk.js.map